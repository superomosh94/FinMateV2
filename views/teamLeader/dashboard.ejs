<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title><%= title %></title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        :root {
            --primary-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --sidebar-width: 280px;
            --header-height: 60px;
            --transition-speed: 0.3s;
        }

        .sidebar {
            background: var(--primary-gradient);
            min-height: 100vh;
            width: var(--sidebar-width);
            box-shadow: 2px 0 10px rgba(0,0,0,0.1);
            position: fixed;
            z-index: 1000;
        }

        .sidebar .nav-link {
            color: rgba(255,255,255,0.9);
            padding: 12px 20px;
            margin: 4px 15px;
            border-radius: 8px;
            transition: all var(--transition-speed);
            font-weight: 500;
            position: relative;
            overflow: hidden;
        }

        .sidebar .nav-link::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: rgba(255,255,255,0.1);
            transition: left var(--transition-speed);
        }

        .sidebar .nav-link:hover::before {
            left: 0;
        }

        .sidebar .nav-link:hover {
            color: #fff;
            transform: translateX(8px);
        }

        .sidebar .nav-link.active {
            background: rgba(255,255,255,0.15);
            color: #fff;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        .sidebar .dropdown-menu {
            background: rgba(255,255,255,0.98);
            border: none;
            border-radius: 12px;
            margin-left: 10px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.15);
            backdrop-filter: blur(10px);
        }

        .sidebar .dropdown-item {
            padding: 10px 20px;
            color: #2d3748;
            transition: all 0.2s;
            border-radius: 6px;
            margin: 2px 8px;
            width: auto;
        }

        .sidebar .dropdown-item:hover {
            background: var(--primary-gradient);
            color: white;
            transform: translateX(5px);
        }

        .main-content {
            margin-left: var(--sidebar-width);
            min-height: 100vh;
            background: #f8f9fc;
        }

        .stat-card {
            border-radius: 15px;
            transition: all 0.3s ease;
            border: none;
            overflow: hidden;
            position: relative;
        }

        .stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: var(--primary-gradient);
        }

        .stat-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 15px 35px rgba(0,0,0,0.1);
        }

        .border-left-primary { border-left: 4px solid #4e73df !important; }
        .border-left-success { border-left: 4px solid #1cc88a !important; }
        .border-left-warning { border-left: 4px solid #f6c23e !important; }
        .border-left-info { border-left: 4px solid #36b9cc !important; }
        .border-left-danger { border-left: 4px solid #e74a3b !important; }

        .navbar-custom {
            background: white;
            box-shadow: 0 2px 15px rgba(0,0,0,0.08);
            backdrop-filter: blur(10px);
        }

        .table-hover tbody tr {
            transition: all 0.2s;
        }

        .table-hover tbody tr:hover {
            background: rgba(102, 126, 234, 0.05);
            transform: scale(1.01);
        }

        .badge {
            font-weight: 500;
            padding: 6px 12px;
            border-radius: 20px;
        }

        .alert {
            border: none;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.05);
        }

        .btn {
            border-radius: 8px;
            font-weight: 500;
            transition: all 0.3s;
            padding: 10px 20px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .card {
            border: none;
            border-radius: 15px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.05);
            transition: all 0.3s;
        }

        .card:hover {
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }

        .progress {
            border-radius: 10px;
            height: 8px;
        }

        .dropdown-toggle::after {
            transition: transform 0.3s;
        }

        .dropdown-toggle.show::after {
            transform: rotate(180deg);
        }

        @media (max-width: 768px) {
            .sidebar {
                width: 100%;
                position: relative;
            }
            .main-content {
                margin-left: 0;
            }
        }
    </style>
</head>
<body>
    <div class="container-fluid">
        <div class="row">
            <!-- Sidebar Navigation -->
            <nav class="col-md-3 col-lg-2 d-md-block sidebar">
                <div class="position-sticky pt-4">
                    <!-- Brand Logo -->
                    <div class="text-center mb-5">
                        <div class="d-inline-block p-3 rounded-circle bg-white shadow">
                            <i class="fas fa-chart-line fa-2x text-primary"></i>
                        </div>
                        <h4 class="text-white mt-3 mb-1 fw-bold">FinMate</h4>
                        <small class="text-white-50">Team Leader Portal</small>
                    </div>

                    <!-- Navigation Menu -->
                    <ul class="nav flex-column">
                        <!-- Dashboard -->
                        <li class="nav-item mb-2">
                            <a class="nav-link active" href="/team-leader/dashboard">
                                <i class="fas fa-tachometer-alt me-3"></i>
                                Dashboard
                                <span class="badge bg-light text-primary ms-2">Home</span>
                            </a>
                        </li>

                        <!-- Team Management -->
                        <li class="nav-item mb-2">
                            <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown">
                                <i class="fas fa-users me-3"></i>
                                Team Management
                            </a>
                            <ul class="dropdown-menu">
                                <li><a class="dropdown-item" href="/team-leader/teams">
                                    <i class="fas fa-eye me-2"></i>Team Overview
                                </a></li>
                                <li><a class="dropdown-item" href="/team-leader/teams/edit">
                                    <i class="fas fa-edit me-2"></i>Edit Team
                                </a></li>
                                <li><a class="dropdown-item" href="/team-leader/teams/settings">
                                    <i class="fas fa-cogs me-2"></i>Team Settings
                                </a></li>
                                <li><hr class="dropdown-divider"></li>
                                <li><a class="dropdown-item" href="/team-leader/members">
                                    <i class="fas fa-user-friends me-2"></i>Team Members
                                </a></li>
                                <li><a class="dropdown-item" href="/team-leader/members/add">
                                    <i class="fas fa-user-plus me-2"></i>Add Member
                                </a></li>
                            </ul>
                        </li>

                        <!-- Expense Management -->
                        <li class="nav-item mb-2">
                            <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown">
                                <i class="fas fa-money-bill-wave me-3"></i>
                                Expense Management
                                <% if (stats.pendingExpenses > 0) { %>
                                    <span class="badge bg-danger ms-2"><%= stats.pendingExpenses %></span>
                                <% } %>
                            </a>
                            <ul class="dropdown-menu">
                                <li><a class="dropdown-item" href="/team-leader/expenses">
                                    <i class="fas fa-list me-2"></i>All Expenses
                                </a></li>
                                <li><a class="dropdown-item" href="/team-leader/expenses/pending">
                                    <i class="fas fa-clock me-2"></i>Pending Approval
                                    <% if (stats.pendingExpenses > 0) { %>
                                        <span class="badge bg-warning float-end"><%= stats.pendingExpenses %></span>
                                    <% } %>
                                </a></li>
                                <li><a class="dropdown-item" href="/team-leader/expenses/approved">
                                    <i class="fas fa-check-circle me-2"></i>Approved Expenses
                                </a></li>
                                <li><a class="dropdown-item" href="/team-leader/expenses/rejected">
                                    <i class="fas fa-times-circle me-2"></i>Rejected Expenses
                                </a></li>
                                <li><hr class="dropdown-divider"></li>
                                <li><a class="dropdown-item" href="/team-leader/expenses/export">
                                    <i class="fas fa-download me-2"></i>Export Data
                                </a></li>
                            </ul>
                        </li>

                        <!-- Planned Expenses -->
                        <li class="nav-item mb-2">
                            <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown">
                                <i class="fas fa-calendar-alt me-3"></i>
                                Planned Expenses
                            </a>
                            <ul class="dropdown-menu">
                                <li><a class="dropdown-item" href="/team-leader/planned-expenses">
                                    <i class="fas fa-list-ol me-2"></i>All Planned Expenses
                                </a></li>
                                <li><a class="dropdown-item" href="/team-leader/planned-expenses/add">
                                    <i class="fas fa-plus-circle me-2"></i>Add Planned Expense
                                </a></li>
                                <li><a class="dropdown-item" href="/team-leader/planned-expenses/calendar">
                                    <i class="fas fa-calendar me-2"></i>Calendar View
                                </a></li>
                            </ul>
                        </li>

                        <!-- Budget Management -->
                        <li class="nav-item mb-2">
                            <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown">
                                <i class="fas fa-wallet me-3"></i>
                                Budget Management
                            </a>
                            <ul class="dropdown-menu">
                                <li><a class="dropdown-item" href="/team-leader/budgets">
                                    <i class="fas fa-chart-pie me-2"></i>Budget Overview
                                </a></li>
                                <li><a class="dropdown-item" href="/team-leader/budgets/current">
                                    <i class="fas fa-chart-line me-2"></i>Current Budgets
                                </a></li>
                                <li><a class="dropdown-item" href="/team-leader/budgets/create">
                                    <i class="fas fa-plus me-2"></i>Create Budget
                                </a></li>
                                <li><hr class="dropdown-divider"></li>
                                <li><a class="dropdown-item" href="/team-leader/budgets/usage">
                                    <i class="fas fa-chart-bar me-2"></i>Usage Analytics
                                </a></li>
                            </ul>
                        </li>

                        <!-- Reports & Analytics -->
                        <li class="nav-item mb-2">
                            <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown">
                                <i class="fas fa-chart-bar me-3"></i>
                                Reports & Analytics
                            </a>
                            <ul class="dropdown-menu">
                                <li><a class="dropdown-item" href="/team-leader/reports">
                                    <i class="fas fa-tachometer-alt me-2"></i>Overview
                                </a></li>
                                <li><a class="dropdown-item" href="/team-leader/reports/expenses">
                                    <i class="fas fa-money-bill me-2"></i>Expense Reports
                                </a></li>
                                <li><a class="dropdown-item" href="/team-leader/reports/budgets">
                                    <i class="fas fa-wallet me-2"></i>Budget Reports
                                </a></li>
                                <li><a class="dropdown-item" href="/team-leader/reports/team-performance">
                                    <i class="fas fa-trophy me-2"></i>Team Performance
                                </a></li>
                                <li><a class="dropdown-item" href="/team-leader/reports/analytics">
                                    <i class="fas fa-chart-line me-2"></i>Advanced Analytics
                                </a></li>
                            </ul>
                        </li>

                        <!-- System Section -->
                        <li class="nav-item mt-5">
                            <small class="text-white-50 px-3 mb-2 d-block">SYSTEM</small>
                        </li>

                        <li class="nav-item mb-2">
                            <a class="nav-link" href="/team-leader/notifications">
                                <i class="fas fa-bell me-3"></i>
                                Notifications
                                <span class="badge bg-danger float-end">3</span>
                            </a>
                        </li>

                        <li class="nav-item mb-2">
                            <a class="nav-link" href="/team-leader/quick-actions">
                                <i class="fas fa-bolt me-3"></i>
                                Quick Actions
                            </a>
                        </li>

                        <li class="nav-item mb-2">
                            <a class="nav-link" href="/team-leader/settings">
                                <i class="fas fa-cog me-3"></i>
                                Settings
                            </a>
                        </li>

                        <!-- User Section -->
                        <li class="nav-item mt-5">
                            <small class="text-white-50 px-3 mb-2 d-block">ACCOUNT</small>
                        </li>

                        <li class="nav-item mb-2">
                            <a class="nav-link" href="/team-leader/profile">
                                <i class="fas fa-user-circle me-3"></i>
                                My Profile
                            </a>
                        </li>

                        <li class="nav-item">
                            <a class="nav-link text-warning" href="/auth/logout" onclick="event.preventDefault(); document.getElementById('logout-form').submit();">
                                <i class="fas fa-sign-out-alt me-3"></i>
                                Logout
                            </a>
                            <form id="logout-form" action="/auth/logout" method="POST" style="display: none;"></form>
                        </li>
                    </ul>
                </div>
            </nav>

            <!-- Main Content Area -->
            <main class="col-md-9 ms-sm-auto col-lg-10 px-0 main-content">
                <!-- Top Navigation Bar -->
                <nav class="navbar navbar-custom navbar-expand-lg">
                    <div class="container-fluid">
                        <div class="d-flex align-items-center">
                            <button class="btn btn-outline-primary me-3 d-md-none" type="button" data-bs-toggle="collapse" data-bs-target="#sidebar">
                                <i class="fas fa-bars"></i>
                            </button>
                            <h1 class="h4 mb-0 fw-bold text-dark">Team Leader Dashboard</h1>
                        </div>
                        
                        <div class="d-flex align-items-center">
                            <div class="dropdown me-3">
                                <button class="btn btn-outline-primary btn-sm dropdown-toggle" type="button" data-bs-toggle="dropdown">
                                    <i class="fas fa-cog me-1"></i>Quick Menu
                                </button>
                                <ul class="dropdown-menu">
                                    <li><a class="dropdown-item" href="/team-leader/quick-actions">
                                        <i class="fas fa-bolt me-2"></i>Quick Actions
                                    </a></li>
                                    <li><a class="dropdown-item" href="/team-leader/notifications">
                                        <i class="fas fa-bell me-2"></i>Notifications
                                    </a></li>
                                    <li><hr class="dropdown-divider"></li>
                                    <li><a class="dropdown-item" href="/team-leader/settings">
                                        <i class="fas fa-cog me-2"></i>Settings
                                    </a></li>
                                </ul>
                            </div>
                            
                            <div class="dropdown">
                                <button class="btn btn-light btn-sm dropdown-toggle d-flex align-items-center" type="button" data-bs-toggle="dropdown">
                                    <div class="bg-primary rounded-circle d-flex align-items-center justify-content-center me-2" style="width: 32px; height: 32px;">
                                        <i class="fas fa-user text-white"></i>
                                    </div>
                                    <span class="me-2"><%= user.first_name %> <%= user.last_name %></span>
                                </button>
                                <ul class="dropdown-menu">
                                    <li><a class="dropdown-item" href="/team-leader/profile">
                                        <i class="fas fa-user me-2"></i>My Profile
                                    </a></li>
                                    <li><a class="dropdown-item" href="/team-leader/settings">
                                        <i class="fas fa-cog me-2"></i>Settings
                                    </a></li>
                                    <li><hr class="dropdown-divider"></li>
                                    <li><a class="dropdown-item text-danger" href="/auth/logout">
                                        <i class="fas fa-sign-out-alt me-2"></i>Logout
                                    </a></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </nav>

                <!-- Page Content -->
                <div class="container-fluid py-4">
                    <!-- Success Alert -->
                    <div class="alert alert-success border-0 rounded-3 shadow-sm mb-4">
                        <div class="d-flex align-items-center">
                            <i class="fas fa-check-circle fa-2x text-success me-3"></i>
                            <div>
                                <h5 class="alert-heading mb-1">Dashboard Loaded Successfully</h5>
                                <p class="mb-0">Welcome to your team management dashboard. All systems are operational.</p>
                            </div>
                        </div>
                    </div>

                    <!-- Team Information & Quick Stats -->
                    <div class="row mb-4">
                        <div class="col-lg-8">
                            <% if (team) { %>
                                <div class="card border-0 shadow-sm">
                                    <div class="card-body">
                                        <div class="d-flex justify-content-between align-items-start">
                                            <div>
                                                <h3 class="card-title mb-2">
                                                    <i class="fas fa-users text-primary me-2"></i>
                                                    <%= team.name %>
                                                </h3>
                                                <p class="text-muted mb-0"><%= team.description %></p>
                                            </div>
                                            <span class="badge bg-primary fs-6">Active Team</span>
                                        </div>
                                    </div>
                                </div>
                            <% } else { %>
                                <div class="alert alert-warning border-0 rounded-3 shadow-sm">
                                    <div class="d-flex align-items-center">
                                        <i class="fas fa-exclamation-triangle fa-2x text-warning me-3"></i>
                                        <div>
                                            <h5 class="alert-heading mb-1">No Team Assigned</h5>
                                            <p class="mb-0">You are not currently assigned to lead any team. Please contact an administrator.</p>
                                        </div>
                                    </div>
                                </div>
                            <% } %>
                        </div>
                        <div class="col-lg-4">
                            <div class="card border-0 bg-primary text-white shadow-sm">
                                <div class="card-body text-center">
                                    <i class="fas fa-chart-line fa-3x mb-3 opacity-75"></i>
                                    <h4>Team Performance</h4>
                                    <p class="mb-0 opacity-75">Real-time analytics and insights</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Statistics Overview -->
                    <div class="row mb-4">
                        <div class="col-xl-3 col-md-6 mb-4">
                            <div class="card stat-card border-0">
                                <div class="card-body">
                                    <div class="row align-items-center">
                                        <div class="col">
                                            <h6 class="text-uppercase text-muted mb-2 fw-bold">Team Members</h6>
                                            <h2 class="mb-0 fw-bold text-primary"><%= stats.teamMembers || 0 %></h2>
                                            <small class="text-muted">Active members</small>
                                        </div>
                                        <div class="col-auto">
                                            <i class="fas fa-users fa-2x text-primary opacity-25"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="col-xl-3 col-md-6 mb-4">
                            <div class="card stat-card border-0">
                                <div class="card-body">
                                    <div class="row align-items-center">
                                        <div class="col">
                                            <h6 class="text-uppercase text-muted mb-2 fw-bold">Team Expenses</h6>
                                            <h2 class="mb-0 fw-bold text-success"><%= stats.teamExpenses || 0 %></h2>
                                            <small class="text-muted">Total expenses</small>
                                        </div>
                                        <div class="col-auto">
                                            <i class="fas fa-money-bill-wave fa-2x text-success opacity-25"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="col-xl-3 col-md-6 mb-4">
                            <div class="card stat-card border-0">
                                <div class="card-body">
                                    <div class="row align-items-center">
                                        <div class="col">
                                            <h6 class="text-uppercase text-muted mb-2 fw-bold">Pending Approval</h6>
                                            <h2 class="mb-0 fw-bold text-warning"><%= stats.pendingExpenses || 0 %></h2>
                                            <small class="text-muted">Awaiting review</small>
                                        </div>
                                        <div class="col-auto">
                                            <i class="fas fa-clock fa-2x text-warning opacity-25"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="col-xl-3 col-md-6 mb-4">
                            <div class="card stat-card border-0">
                                <div class="card-body">
                                    <div class="row align-items-center">
                                        <div class="col">
                                            <h6 class="text-uppercase text-muted mb-2 fw-bold">Active Budgets</h6>
                                            <h2 class="mb-0 fw-bold text-info"><%= stats.teamBudgets || 0 %></h2>
                                            <small class="text-muted">Current budgets</small>
                                        </div>
                                        <div class="col-auto">
                                            <i class="fas fa-wallet fa-2x text-info opacity-25"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Quick Actions & Recent Activity -->
                    <div class="row">
                        <!-- Quick Actions -->
                        <div class="col-lg-6 mb-4">
                            <div class="card border-0 shadow-sm">
                                <div class="card-header bg-transparent border-0 pb-0">
                                    <h5 class="card-title mb-0">
                                        <i class="fas fa-bolt text-warning me-2"></i>
                                        Quick Actions
                                    </h5>
                                </div>
                                <div class="card-body">
                                    <div class="row g-3">
                                        <div class="col-sm-6">
                                            <a href="/team-leader/expenses/pending" class="btn btn-warning w-100 h-100 py-3">
                                                <i class="fas fa-clock fa-2x mb-2"></i><br>
                                                Review Pending<br>
                                                <small><%= stats.pendingExpenses || 0 %> items</small>
                                            </a>
                                        </div>
                                        <div class="col-sm-6">
                                            <a href="/team-leader/members/add" class="btn btn-success w-100 h-100 py-3">
                                                <i class="fas fa-user-plus fa-2x mb-2"></i><br>
                                                Add Team Member
                                            </a>
                                        </div>
                                        <div class="col-sm-6">
                                            <a href="/team-leader/budgets/create" class="btn btn-primary w-100 h-100 py-3">
                                                <i class="fas fa-wallet fa-2x mb-2"></i><br>
                                                Create Budget
                                            </a>
                                        </div>
                                        <div class="col-sm-6">
                                            <a href="/team-leader/planned-expenses/add" class="btn btn-info w-100 h-100 py-3">
                                                <i class="fas fa-calendar-plus fa-2x mb-2"></i><br>
                                                Plan Expense
                                            </a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Recent Team Expenses -->
                        <div class="col-lg-6 mb-4">
                            <div class="card border-0 shadow-sm">
                                <div class="card-header bg-transparent border-0 d-flex justify-content-between align-items-center">
                                    <h5 class="card-title mb-0">
                                        <i class="fas fa-history text-primary me-2"></i>
                                        Recent Team Expenses
                                    </h5>
                                    <a href="/team-leader/expenses" class="btn btn-sm btn-outline-primary">
                                        View All <i class="fas fa-arrow-right ms-1"></i>
                                    </a>
                                </div>
                                <div class="card-body">
                                    <% if (recentExpenses && recentExpenses.length > 0) { %>
                                        <div class="table-responsive">
                                            <table class="table table-hover align-middle">
                                                <thead class="table-light">
                                                    <tr>
                                                        <th>Member</th>
                                                        <th>Amount</th>
                                                        <th>Status</th>
                                                        <th>Actions</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <% recentExpenses.forEach(expense => { %>
                                                        <tr>
                                                            <td>
                                                                <div class="d-flex align-items-center">
                                                                    <div class="bg-light rounded-circle d-flex align-items-center justify-content-center me-3" style="width: 36px; height: 36px;">
                                                                        <i class="fas fa-user text-muted"></i>
                                                                    </div>
                                                                    <div>
                                                                        <div class="fw-bold"><%= expense.first_name %> <%= expense.last_name %></div>
                                                                        <small class="text-muted"><%= expense.category %></small>
                                                                    </div>
                                                                </div>
                                                            </td>
                                                            <td>
                                                                <span class="fw-bold text-dark">$<%= expense.amount %></span>
                                                            </td>
                                                            <td>
                                                                <span class="badge bg-<%= expense.status === 'approved' ? 'success' : expense.status === 'rejected' ? 'danger' : 'warning' %>">
                                                                    <i class="fas fa-<%= expense.status === 'approved' ? 'check' : expense.status === 'rejected' ? 'times' : 'clock' %> me-1"></i>
                                                                    <%= expense.status %>
                                                                </span>
                                                            </td>
                                                            <td>
                                                                <% if (expense.status === 'pending') { %>
                                                                    <div class="btn-group btn-group-sm">
                                                                        <a href="/team-leader/expenses/approve/<%= expense.id %>" class="btn btn-success">
                                                                            <i class="fas fa-check"></i>
                                                                        </a>
                                                                        <a href="/team-leader/expenses/reject/<%= expense.id %>" class="btn btn-danger">
                                                                            <i class="fas fa-times"></i>
                                                                        </a>
                                                                    </div>
                                                                <% } else { %>
                                                                    <a href="/team-leader/expenses/view/<%= expense.id %>" class="btn btn-sm btn-outline-primary">
                                                                        <i class="fas fa-eye"></i>
                                                                    </a>
                                                                <% } %>
                                                            </td>
                                                        </tr>
                                                    <% }); %>
                                                </tbody>
                                            </table>
                                        </div>
                                    <% } else { %>
                                        <div class="text-center py-5">
                                            <i class="fas fa-receipt fa-3x text-muted mb-3"></i>
                                            <h5 class="text-muted">No Recent Expenses</h5>
                                            <p class="text-muted mb-3">No team expenses have been recorded yet.</p>
                                            <a href="/team-leader/expenses" class="btn btn-primary">
                                                <i class="fas fa-plus me-2"></i>View All Expenses
                                            </a>
                                        </div>
                                    <% } %>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Initialize dropdowns and tooltips
        var dropdownElementList = [].slice.call(document.querySelectorAll('.dropdown-toggle'));
        var dropdownList = dropdownElementList.map(function (dropdownToggleEl) {
            return new bootstrap.Dropdown(dropdownToggleEl);
        });

        // Add smooth animations
        document.addEventListener('DOMContentLoaded', function() {
            // Animate stat cards on load
            const statCards = document.querySelectorAll('.stat-card');
            statCards.forEach((card, index) => {
                card.style.animationDelay = `${index * 0.1}s`;
                card.classList.add('animate__animated', 'animate__fadeInUp');
            });

            // Add hover effects to navigation
            const navLinks = document.querySelectorAll('.sidebar .nav-link');
            navLinks.forEach(link => {
                link.addEventListener('mouseenter', function() {
                    this.style.transform = 'translateX(8px)';
                });
                link.addEventListener('mouseleave', function() {
                    if (!this.classList.contains('active')) {
                        this.style.transform = 'translateX(0)';
                    }
                });
            });
        });

        // Auto-hide alerts after 5 seconds
        setTimeout(function() {
            const alerts = document.querySelectorAll('.alert');
            alerts.forEach(alert => {
                const bsAlert = new bootstrap.Alert(alert);
                bsAlert.close();
            });
        }, 5000);
    </script>
</body>
</html>